<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CoRamTix Status Monitor</title>
  <script>
    const webhookURL = "https://discord.com/api/webhooks/1429028428639637548/ATe0k-CuzwTGRXMAioG0kA-V4nj3_m4PJzT7cFUtnPoYONVwBitWO2jR3tWvln6xGmir";

    const services = [
      { name: "Panel", url: "https://panel3.coramtix.in/" },
      { name: "Node 1", url: "https://github.com/YourRepo1" },
      { name: "Node 2", url: "https://github.com/YourRepo2" },
      { name: "Node 3", url: "https://github.com/YourRepo3" },
      { name: "Node 4", url: "https://github.com/YourRepo4" },
      { name: "Node 5", url: "https://github.com/YourRepo5" }
    ];

    // Store the last known status
    const lastStatus = {};

    async function checkStatus() {
      for (const service of services) {
        let status;
        try {
          await fetch(service.url, { method: "GET", mode: "no-cors" });
          status = "üü¢ UP";
        } catch (e) {
          status = "üî¥ DOWN";
        }

        // Only send if status changed
        if (lastStatus[service.name] !== status) {
          lastStatus[service.name] = status;
          sendDiscordMessage(service.name, status);
        }
      }
    }

    async function sendDiscordMessage(serviceName, status) {
      const message = {
        embeds: [
          {
            title: `üõ∞Ô∏è ${serviceName} Status Changed`,
            color: status === "üü¢ UP" ? 0x00ff00 : 0xff0000,
            fields: [
              { name: serviceName, value: status, inline: true }
            ],
            footer: { text: "Last checked: " + new Date().toLocaleString() }
          }
        ]
      };

      await fetch(webhookURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(message)
      });
    }

    // Initial check
    window.onload = checkStatus;

    // Check every 1 minute
    setInterval(checkStatus, 1 * 60 * 1000);
  </script>
</head>
<body>
  <h2>üõ∞Ô∏è CoRamTix Status Monitor</h2>
  <p>Will send a Discord message only when a node goes UP or DOWN.</p>
</body>
</html>
